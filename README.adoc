:macro: toc
:toc-title:
:toc-levels: 9

# URI Monitor

image:https://circleci.com/gh/jasonkuhrt/uri-monitor.svg?style=svg["Circle CI", link="https://circleci.com/gh/jasonkuhrt/uri-monitor"]

toc::[]


## Installation

```
npm install uri-monitor
```



## API

### Constructor
```haskell
UriMonitor :: String, Int -> Stream Event
```

* `uri` The URI to monitor. Plain GET requests will be made against this.
* `intervalMs` The time between checks



## Types

#### `Event`

|===
| event name | callback arguments | description
| `check`  | `is_connected :: Boolean`, `response :: Check_Result` | A check result
| `change` | `is_connected :: Boolean`, `response :: Check_Result` | A check result, and it is different than the last check
| `pong` | `response :: Check_Result` | A check result that is a success
| `drop` | `response :: Check_Result` | A check result that is a failure
| `connection` | `response :: Check_Result` | A check result that is a success, and it is different than the last check
| `disconnection` | `response :: Check_Result` | A check result that is a failure, and it is different than the last check
|===

#### `CheckResult`

`superagent` has two types of request errors: general IO and response errors in the 400 or 500 range. URI Monitor treats both as a check failure. Result can be one of three things:

. If a successful request then the `superagent` link:http://visionmedia.github.io/superagent/#response-properties[`response`] object.

. If a failed request due to IO, then the link:http://visionmedia.github.io/superagent/#error-handling[`err`] as returned by `superagent`.

. If a failed request due to 4xx/5xx range response, then the link:http://visionmedia.github.io/superagent/#error-handling[`response.error`] as provided by `superagent`.
